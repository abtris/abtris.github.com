
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Prskavčí blog</title>
  <meta name="author" content="Ladislav Prskavec">

  
  <meta name="description" content="Dneska za mnou přišel kolega, že mu vadí na SVN, že neumí exportovat poslední revizi s plnou cestou. Potřebuje to na server kde nemá shell aby mohl &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.prskavec.net/page//page/10/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/all.css?v=1412111641" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/feed/index.html" rel="alternate" title="Prskavčí blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
<meta name="google-site-verification" content="mepQHhq6JPqzvIjErdB-A6hp3UKAYIlYHN7xPUL8JUM" />

  
</head>

<body   >
  <header role="banner"><hgroup>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/feed/index.html" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.prskavec.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archív</a></li>
  <li><a href="/prednasky">Přednášky</a></li>  
  <li><a href="/skoleni-a-kurzy">Školení a kurzy</a></li>
  <li><a href="/kontakt">Kontakt</a></li>  
</ul>

</nav> 
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/01/export-posledni-revize-ze-subversion/">Export poslední revize ze Subversion</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-01-19T00:00:00+01:00" pubdate data-updated="true">19. 01. 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Dneska za mnou přišel kolega, že mu vadí na SVN, že neumí exportovat poslední revizi s plnou cestou. Potřebuje to na server kde nemá shell aby mohl spustit patch, který si můžeme vygenerovat pomocí <a href="http://svnbook.red-bean.com/en/1.5/svn.ref.svn.c.diff.html"><code>svn diff</code></a>. A nechce všechny soubory jak to standardně dělá <a href="http://svnbook.red-bean.com/en/1.5/svn.ref.svn.c.export.html"><code>svn export</code></a>, ale jen ty které se změnili.</p>

<p>Trochu jsem se na to díval a myslím si, že řešení přímo jen pomocí SVN není, pokud někdo ví jak to udělat elegantně ať mi dá vědět. Já jsem na to napsal jednoduchý shell skript, který to řeší, třeba to bude někomu také ku prospěchu.</p>

<pre name="code" class="bash">
EXPORTPATH=/tmp/testexport/
REPOS=file:///home/prskavecl/repos/project/
REPOSPATH=/home/prskavecl/repos/project/
REV="$( svnlook youngest $REPOSPATH )"

# function to list and export file by file
pathexport() # $1
{
mkdir -p $EXPORTPATH${2%/*}
svn export --force $1$2 $EXPORTPATH$2
}

# make export path
mkdir -p $EXPORTPATH
# list all changed files
for i in $( svnlook changed -r $REV $REPOSPATH ); do
if [ "${#i}" -gt "2" ]
then pathexport $REPOS $i
fi
done</pre>


<p>Na začátku skriptu se nastaví proměnné s cestami. Před svnlook si skript zjistí poslední revizi a projde všechny soubory, které se v revizi změnili. K nim vytvoří příslušné adresáře a vyexportuje jednotlivé soubory. Neměl by být problém napsat obdobný skript i pro windows.</p>

<p>Více o exportu také najdete na <a href="http://svn.prskavec.net/">svn.prskavec.net</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/01/top-ten-2008/">Top Ten 2008</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-01-12T00:00:00+01:00" pubdate data-updated="true">12. 01. 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Jako jiné blogy, jsem udělal žebříček podle toho kolik lidí který příspěvek shlédlo.</p>

<p><a href="http://blog.prskavec.net/2008/04/wordpress-themes/">Wordpress Themes</a>
<a href="http://blog.prskavec.net/2008/09/zend-framework-16-a-moje-zkuenosti-s-dojo-tabcontainer/">Zend Framework 1.6 a moje zkušenosti s Dojo TabContainer</a>
<a href="http://blog.prskavec.net/2008/09/zend-framework-16-a-ajax-pomoc-jquery/">Zend Framework 1.6 a ajax pomocí jQuery</a>
<a href="http://blog.prskavec.net/2008/07/subversion-pro-kazdho/">Subversion pro každého</a>
<a href="http://blog.prskavec.net/2008/07/gettext-a-php/">Gettext a PHP</a>
<a href="http://blog.prskavec.net/2008/03/subversion-pod-windows/">Subversion pod Windows</a>
<a href="http://blog.prskavec.net/2008/11/phpundercontrol-vs-xinc/">phpUnderControl vs Xinc</a>
<a href="http://blog.prskavec.net/2008/07/netbeans-pdt-a-subversion-15/">NetBeans, PDT a Subversion 1.5</a>
<a href="http://blog.prskavec.net/2008/06/jednoduch-aplikace-v-php-a-flex/">Jednoduchá aplikace v PHP a Flex</a>
<a href="http://blog.prskavec.net/2007/11/tvorba-caroveho-kodu-v-php/">Tvorba čárového kódu v PHP</a></p>

<p>Jsem rád, že se některé články líbíli i když většinou žádná extra diskuze neproběhla, za ohlasy ke všem článkům všem přispěvovatelům děkuji a snad to se mnou vydržíte i v novém roce.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/12/pf-2009/">PF 2009</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-23T00:00:00+01:00" pubdate data-updated="true">23. 12. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div align="center"><img style="max-width: 800px;" src="http://blog.prskavec.net/wp-content/uploads/2008/12/pf2009.png" /><br />Přejí veselé vánoce a šťasný nový rok také čtenářům mého blogu.<br /></div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/12/sony-vaio-tz31xn-a-ubuntu-810/">SONY VAIO TZ31XN a Ubuntu 8.10</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-22T00:00:00+01:00" pubdate data-updated="true">22. 12. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Sony VAIO TZ31XN je malý mobilní notebook, který je trhu asi rok, dnes ho nahradil modernější řada TT, ale krásný notebook je vybaven Windows Vista, které jsou ale k jeho hardware (1,2GHz, 2G RAM) nepřiměřené svými nároky. Notebook není nijak rychlý, pracovat se s ním dá, ale není to nic moc. Zkusil jsem tedy, jak na stejném hardware poběží jiný operační systém a zvolil jsem Ubuntu 8.10.</p>

<p>S touto linuxovou distribuci mám nějaké zkušenosti jako uživatel, jde snadno nainstalovat a přijde mi pro notebooky povedená, většina hardware funguje již při prvním spuštění. Neměl jsem větší problémy, jen mi nefungovala kamera ve Skype, což jsem také po troše hledání vyřešil.</p>

<h3>Přehled hardware</h3>


<pre># lspci
00:00.0 Host bridge: Intel Corporation Mobile 945GM/PM/GMS, 943/940GML and 945GT Express Memory Controller Hub (rev 03)
00:02.0 VGA compatible controller: Intel Corporation Mobile 945GM/GMS, 943/940GML Express Integrated Graphics Controller (rev 03)
00:02.1 Display controller: Intel Corporation Mobile 945GM/GMS/GME, 943/940GML Express Integrated Graphics Controller (rev 03)
00:1b.0 Audio device: Intel Corporation 82801G (ICH7 Family) High Definition Audio Controller (rev 02)
00:1c.0 PCI bridge: Intel Corporation 82801G (ICH7 family) PCI Express Port 1 (rev 02)
00:1c.1 PCI bridge: Intel Corporation 82801G (ICH7 Family) PCI Express Port 2 (rev 02)
00:1c.2 PCI bridge: Intel Corporation 82801G (ICH7 Family) PCI Express Port 3 (rev 02)
00:1c.3 PCI bridge: Intel Corporation 82801G (ICH7 Family) PCI Express Port 4 (rev 02)
00:1d.0 USB Controller: Intel Corporation 82801G (ICH7 Family) USB UHCI Controller #1 (rev 02)
00:1d.1 USB Controller: Intel Corporation 82801G (ICH7 Family) USB UHCI Controller #2 (rev 02)
00:1d.2 USB Controller: Intel Corporation 82801G (ICH7 Family) USB UHCI Controller #3 (rev 02)
00:1d.3 USB Controller: Intel Corporation 82801G (ICH7 Family) USB UHCI Controller #4 (rev 02)
00:1d.7 USB Controller: Intel Corporation 82801G (ICH7 Family) USB2 EHCI Controller (rev 02)
00:1e.0 PCI bridge: Intel Corporation 82801 Mobile PCI Bridge (rev e2)
00:1f.0 ISA bridge: Intel Corporation 82801GBM (ICH7-M) LPC Interface Bridge (rev 02)
00:1f.1 IDE interface: Intel Corporation 82801G (ICH7 Family) IDE Controller (rev 02)
00:1f.3 SMBus: Intel Corporation 82801G (ICH7 Family) SMBus Controller (rev 02)
02:00.0 Ethernet controller: Marvell Technology Group Ltd. 88E8055 PCI-E Gigabit Ethernet Controller (rev 13)
03:00.0 Network controller: Intel Corporation PRO/Wireless 4965 AG or AGN [Kedron] Network Connection (rev 61)
09:04.0 CardBus bridge: Ricoh Co Ltd RL5c476 II (rev ba)
09:04.1 FireWire (IEEE 1394): Ricoh Co Ltd R5C832 IEEE 1394 Controller (rev 04)
09:04.3 System peripheral: Ricoh Co Ltd R5C843 MMC Host Controller (rev ff)
09:04.4 System peripheral: Ricoh Co Ltd R5C592 Memory Stick Bus Host Adapter (rev 11)
</pre>


<pre>
# lsusb
Bus 005 Device 006: ID 044e:3017 Alps Electric Co., Ltd
Bus 005 Device 005: ID 05ca:183a Ricoh Co., Ltd
Bus 005 Device 002: ID 054c:02d5 Sony Corp.
Bus 005 Device 003: ID 0409:005a NEC Corp. HighSpeed Hub
Bus 005 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 004 Device 002: ID 147e:2016
Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 002: ID 046d:c03e Logitech, Inc. Premium Optical Wheel Mouse
Bus 001 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
</pre>


<h3>Webcamera</h3>


<p>Pro fungování webcamery je nutné zkompilovat driver.</p>

<p>Pro kompilaci je nutný základní balíček a subversion pokud ho nemáte nainstalovaný tak</p>

<pre>
apt-get install build-essential
apt-get install subversion
</pre>


<p>potom je potřeba stáhnout nejnovější verzi ze SVN a tu zkompilovat</p>

<pre>
svn co http://svn.mediati.org/svn/r5u870/trunk/ webcam
cd webcam
make
make install
</pre>


<p>a potom nainstalovat ovladač.</p>

<pre>
modprobe r5u870
</pre>


<p>funkčnost ověřit můžete pomocí např. gstreamer-properties nebo ve skype.</p>

<p>Pokud budete mít nějaké dotazy k notebooku a jeho běhu pod linuxem, napište do komentářů.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/12/mozilla-thunderbird-30-beta-1/">Mozilla Thunderbird 3.0 beta 1</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-10T00:00:00+01:00" pubdate data-updated="true">10. 12. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.mozillamessaging.com/en-US/thunderbird/3.0b1/">Seznam novinek</a> je najdete v každém příspěvku co jsem četl, ale jak to vypadá když to pustíte a je to změna k lepšímu?</p>

<h3>Novinky</h3>


<ul>
    <li>záložky pro zobrazování e-mailových zpráv</li>
    <li>vylepšení IMAPu pro rychlejší zobrazování zpráv</li>
    <li>vylepšené okno pro rychlé čtení</li>
    <li>nový  správce doplňků</li>
    <li>vylepšený správce adres</li>
    <li>vylepšený import mailů z jiných klentů</li>
    <li>integrace s vyhledáváním ve Windows Vista</li>
    <li>integrace s Mac OS X Address Book (nevyzkoušeno, nemám Mac X)</li>
</ul>


<h3>První spuštění</h3>


<p>Inovovaný průvodce vytvářením účtu. Po startu je klasické vytváření účtu jako novinka přibyla popora pro Gmail IMAP co se mi docela hodí.</p>

<p><a href="http://blog.prskavec.net/wp-content/uploads/2008/12/image.png"><img style="border-right: 0px;border-top: 0px;border-left: 0px;border-bottom: 0px" src="http://blog.prskavec.net/wp-content/uploads/2008/12/image-thumb.png" border="0" alt="image" width="495" height="447" /></a></p>

<h3>Záložky pro zobrazování e-mailových zpráv</h3>


<p>Vlastní okno poštovního klienta se doznalo několika změn. Jsou vidět záložky</p>

<p><a href="http://blog.prskavec.net/wp-content/uploads/2008/12/image1.png"><img style="border-right: 0px;border-top: 0px;border-left: 0px;border-bottom: 0px" src="http://blog.prskavec.net/wp-content/uploads/2008/12/image-thumb1.png" border="0" alt="image" width="644" height="444" /></a></p>

<h3>Integrace s vyhledáváním ve Windows Vista</h3>


<p>Další novinkou je podpora pro Windows Vista, kdy se zařadí maily mezi vyhledávání.</p>

<p><a href="http://blog.prskavec.net/wp-content/uploads/2008/12/image2.png"><img style="border-right: 0px;border-top: 0px;border-left: 0px;border-bottom: 0px" src="http://blog.prskavec.net/wp-content/uploads/2008/12/image-thumb2.png" border="0" alt="image" width="546" height="95" /></a></p>

<p>Tady je vidět jak to dobře funguje.</p>

<p><a href="http://blog.prskavec.net/wp-content/uploads/2008/12/image3.png"><img style="border-right: 0px;border-top: 0px;border-left: 0px;border-bottom: 0px" src="http://blog.prskavec.net/wp-content/uploads/2008/12/image-thumb3.png" border="0" alt="image" width="396" height="237" /></a></p>

<h3>Nový  správce doplňků</h3>


<p>Správce kopíruje správce použitý ve Firefoxu 3.x, což se dalo samozřejmě očekávat.</p>

<p><a href="http://blog.prskavec.net/wp-content/uploads/2008/12/image4.png"><img style="border-right: 0px;border-top: 0px;border-left: 0px;border-bottom: 0px" src="http://blog.prskavec.net/wp-content/uploads/2008/12/image-thumb4.png" border="0" alt="image" width="645" height="475" /></a></p>

<h3>Vylepšený správce adres</h3>


<p>Lépe funguje propojení s maily. U adresy, kterou máte v Adresáři se zobrazí žlutá hvězdička a jde přímo upravit jméno bez toho abychom museli jít do adresáře.</p>

<p><a href="http://blog.prskavec.net/wp-content/uploads/2008/12/image5.png"><img style="border-right: 0px;border-top: 0px;border-left: 0px;border-bottom: 0px" src="http://blog.prskavec.net/wp-content/uploads/2008/12/image-thumb5.png" border="0" alt="image" width="467" height="326" /></a></p>

<p>Nově je podpora pro narozeniny.</p>

<p><a href="http://blog.prskavec.net/wp-content/uploads/2008/12/image6.png"><img style="border-right: 0px;border-top: 0px;border-left: 0px;border-bottom: 0px" src="http://blog.prskavec.net/wp-content/uploads/2008/12/image-thumb6.png" border="0" alt="image" width="644" height="284" /></a></p>

<h3>Závěr</h3>


<p>Nový Thunderbird přináší několik zlepšení, které usnadní práci a pomůžou všem jeho uživatelům. Znatelné je zrychlení při práci s IMAPem, to oceněju nejvíce a také záložky jsou šikovné, jsme na ně z prohlížečů celkem zvyklí a určitě si najdou místo tady hlavně například pro kalendář apod.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/phpundercontrol-vs-xinc/">phpUnderControl vs Xinc</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-04T00:00:00+01:00" pubdate data-updated="true">04. 11. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Nedávno jsem se snažil trochu vylepšit vývoj o některé aspekty, které mají spíše formálnější charakter. Celý vývojový proces jsem načrtl na následujícím obrázku.</p>


<p>  <p><a href="http://blog.prskavec.net/wp-content/uploads/2008/11/development.png"><font color="#ffffff"></font><img style="border-right: 0px;border-top: 0px;float: none;margin-left: auto;border-left: 0px;margin-right: auto;border-bottom: 0px" height="493" alt="Development" src="http://blog.prskavec.net/wp-content/uploads/2008/11/development-thumb.png" width="635" border="0" /></a> Vývojář PHP má výhodu libovolného IDE (preferuji Eclipse PDT). Pro zdrojové kódy používám jako SCM Subversion. Nedávno jsem přidal pre-commit hook skript na kontrolu syntaxe. Používám ho hlavně pro kontrolu projektů v Zend Frameworku. PHP_CodeSniffer podporuje <a href="http://checkstyle.sourceforge.net/">Checkstyle</a> tak není problém výstup zaintegrovat i do jiných programů. Jako post-commit skript používám generován XML logů, které používá stránka s náhledy na projekty na kterých pracuji.</p>  <p>Protože jsem si oblíbil <a href="http://blog.prskavec.net/?p=142">Phing</a> pro automatizaci tvroby buildu hledal jsem něco co by to celé zastřešilo. Řešení je <a href="http://en.wikipedia.org/wiki/Continuous_integration">Continuous integration</a> a pro php jsou použitelné jen dva projekty a to <a href="http://www.phpundercontrol.org">phpUnderControl</a> a <a href="http://code.google.com/p/xinc/">Xinc</a>. Oba umí stejné nebo podobné věci a přece jenom se trochu liší jak vznikli a jak se provozují.</p>  <p>Jako první jsem zkoušel phpUnderControl. Ten je založený jako plugin do <a href="http://cruisecontrol.sourceforge.net/">Cruisecontrolu</a>, který je napsaný v Jave a běží jako vlastní webový server, který používá <a href="http://ant.apache.org/">Ant</a> a může volat víceméně přes něj cokoliv si zamanete. V phpUnderControl je integrována podpora pro PHPUnit (<a href="http://www.phpunit.de/pocket_guide/3.2/en/code-coverage-analysis.html">Code Coverage</a>, Project Mess Detection and Software Metrics), PHPDocumentor a PHP_CodeSniffer. Pro zobrazení dat je připravena sada XSL stylesheetů pro Cruisecontrol, tak jsou vidět <a href="http://www.phpundercontrol.org/images/0.3.5-metrics.png">pěkné grafy</a>.</p>  <p>Jedinou nevýhodu vidím v tom, že je to odělený systém běžící na Javě, ale to může být pro někoho klidně i výhoda.</p>  <p>Další CI server jsem vyzkoušel Xinc, ten má výhodu, že je napsaný v PHP a stačí mu Apache a skript který slouží jako CRON pro buildy. Místo Antu je použitý Phing a má ještě navíc podporu pro XDebug, který také umí Code Coverage Analysis a Profiling.</p>  <p>Xinc má vzhled založený na knihovně <a href="http://ezcomponents.org/">eZ Components</a>, používá <a href="http://ezcomponents.org/docs/tutorials/Base">Base</a> a <a href="http://ezcomponents.org/docs/tutorials/Graph">Graph</a>. Chybí mi v defaultních templates lepší podpora pro zobrazování výsledků z PHPDocumentor, PHP_CodeSniffer jak to má udělené phpUnderControl. Jak je vidět např. v <a href="http://www.xinc.eu/#xinc">demu</a>, tak pokud se podívate na jednotlivý projekt je to jen log a odkazy, není to příliš elegantní a nejsou to jednotlivé html stránky na které lze odkazovat. Vývoj ale intenzivně pokračuje a uvidíme jakých vylepšení se dočkáme ve verzi 2.1. Výhody Xincu také vidím ve psaní pluginů přímo v php.</p>  <p>Zajímalo by mě jak to funguje jinde a případně, které řešení používate a proč.</p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/09/zend-framework-16-a-ajax-pomoc-jquery/">Zend Framework 1.6 a ajax pomocí jQuery</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-23T00:00:00+02:00" pubdate data-updated="true">23. 09. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Jak jsem psal v <a href="http://blog.prskavec.net/?p=163">Zend Framework 1.6 a moje zkušenosti s Dojo TabContainer</a>, nakonec jsem použil jQuery. Ve formuláři se dají měnit některá data, které jsou závislá na dalších, které automaticky předvyplňuji a na to jsem použil při změnách ajax. Docela mě potěšilo jak jednoduše a pěkně se to dá udělat pomocí <a href="http://jquery.com/">jQuery</a>.</p>

<pre name='code' class="php">&lt;script&gt;
$(document).ready(function(){
     $("#example &gt; ul").tabs();
     $('#page1-deadline_vyzva').datepicker();
     $('#page3-datum_zahajeni').datepicker();
     $('#page3-datum_ukonceni').datepicker();

      $('#page1-editor').change(function(){
             $.ajax({
                        type: "POST",
                        url: "&lt;?php echo $this-&gt;baseUrl();?&gt;/user/info/idcvut/" + $(this).val(),
                        success: function(xml){
                    if ($.browser.msie)
                    {
                        xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
                        xmlDoc.async="false";
                        xmlDoc.loadXML(xml);
                        $("#page1-navrhovatel_jmeno")[0].value = xmlDoc.getElementsByTagName("name")[0].childNodes[0].nodeValue;
                        $("#page1-navrhovatel_email")[0].value = xmlDoc.getElementsByTagName("email")[0].childNodes[0].nodeValue;
                        $("#page1-navrhovatel_telefon")[0].value = xmlDoc.getElementsByTagName("phone")[0].childNodes[0].nodeValue;
                        $("#page1-navrhovatel_pracoviste")[0].value = xmlDoc.getElementsByTagName("dept")[0].childNodes[0].nodeValue;
                    }
                    else
                    {
                    $("#page1-navrhovatel_jmeno")[0].value = $("name", xml).text();
                    $("#page1-navrhovatel_email")[0].value = $("email", xml).text();
                    $("#page1-navrhovatel_telefon")[0].value = $("phone", xml).text();
                    $("#page1-navrhovatel_pracoviste")[0].value = $("dept", xml).text();
                    }
                        }
             }); // end ajax
      }); // end change function
}); // end document ready
&lt;/script&gt;
...</pre>


<p>Původní skript jsem rošířil o několik dalších funkcí, přidal jsem datapickery pro datumy a potom ten ajax. Nejprve pomocí vybere prvek a přidáme mu attribut onChange.</p>

<pre name='code' class="javascript">$('#page1-editor').change(function(){ … });</pre>


<p>Do této funkce jsem vložil volání ajaxu. Je to jednoduché a dobře pochopitelné. Type je typ GET nebo POST, v url je URL Controlleru, který vrací XML s potřebnými daty. Pomocí $(this.val) si šáhnu na vyplněnou hodnotu v políčku na které jsem aplikoval onChange(). Success vrací data, které si jednoduše parsuji přes $(&ldquo;name&rdquo;, xml).text(), kde name je &lt;name&gt;&lt;/name&gt; z xml dat, které posílá php.</p>

<p>Je to jednoduché a moc pěkný kód, který najde uplatnění. Dobré je, že není potřeba do formuláře přidávat do atributů funkci onchange, jak jsem to musel dělat, když jsem nepoužívat jQuery.</p>

<p>Ještě přidám část kódu z controlleru:</p>

<pre name='code' class="php">…
function infoAction()
{
$this-&gt;_helper-&gt;layout-&gt;disableLayout();
$this-&gt;_helper-&gt;getHelper('ViewRenderer')-&gt;setNoRender();
$idcvut = (int)$this-&gt;_request-&gt;getParam('idcvut');
//echo $idcvut;
$ssu = new Usermap($this-&gt;config);
// make xml
//Zend_Debug($i);
$i=$ssu-&gt;getUsermapInfoByID($idcvut);
$xml = '&lt;user&gt;&lt;name&gt;'.$i[‘cn’].'&lt;/name&gt;&lt;email&gt;'.$i['email'].'&lt;/email&gt;&lt;phone&gt;'.$i[‘phone’].'&lt;/phone&gt;&lt;dept&gt;'.$i[‘department’].'&lt;/dept&gt;&lt;/user&gt;';
echo $xml;
}
…</pre>


<p>Snad to někomu pomůže, moc příkladů na Zend a jQuery ajax jsem nikde nenašel.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/09/zend-framework-16-a-moje-zkuenosti-s-dojo-tabcontainer/">Zend Framework 1.6 a moje zkušenosti s Dojo TabContainer</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-11T00:00:00+02:00" pubdate data-updated="true">11. 09. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Zrovna dělám na jednom malém projektu, který jsem hned začal psát zrovna jak vyšel ZF 1.6, celkem standardní věci až na to, že jsem potřeboval rozdělit formulář na více stránek a udělat záložky.</p>

<p>Postupoval jsem <a href="http://framework.zend.com/manual/en/zend.dojo.form.html#zend.dojo.form.decorators.dijitContainer">podle manulálu</a>, vyvořil jsem si formulář se subformy a celkem to dobře funguje. Potom když jsem potřeboval rozbrazit záložky narazil jsem na několik problémů se kterými jsem si různě poradil.</p>

<p>Takto vypadají <a href="http://dojotoolkit.org/book/dojo-book-0-9/part-2-dijit/layout/tab-container">záložky pomocí Dojo frameworku</a>.</p>

<p><a href="http://blog.prskavec.net/wp-content/uploads/2008/09/image.png"></a></p>

<p>Nejdříve byl problém přidat záložku kde byl jen text. Tak jsem vytvořil vlastní element a ten potom vracel jen co jsem do něj napsal za text. Dalším problémem byl konec fomuláře jak je vidět na obrázku tak špatně uzavíral a číst ho mizela.</p>

<p><a href="http://blog.prskavec.net/wp-content/uploads/2008/09/image1.png"></a></p>

<p>To jsem opravil tak, že jsem celou strukturu záložek přesunul do View.</p>

<pre name='code' class='php'>
&lt;?php echo $this-&gt;form; ?&gt;
</pre>


<p>jsem musel udělat</p>

<pre name='code' class='php'>
&lt;?php
$this-&gt;dojo()-&gt;enable();

echo "&lt;form method='".$this-&gt;form-&gt;getMethod()."' enctype='application/x-www-form-urlencoded' &gt;";

// Container with tabs
$this-&gt;tabContainer()-&gt;captureStart('tab1', array(), array('style' =&gt; 'width:950px;height:800px;'));

    // First tab "Dates"
    $this-&gt;contentPane()-&gt;captureStart('pane1', array(), array('title' =&gt; 'Vstupní evidence'));
        echo $this-&gt;form-&gt;getSubform('page1');
    echo $this-&gt;contentPane()-&gt;captureEnd('pane1');

    // Second tab "FAQ"
    $this-&gt;contentPane()-&gt;captureStart('pane2', array(), array('title' =&gt; 'Příprava rozpočtu'));
      echo $this-&gt;form-&gt;getSubform('page4');     
    echo $this-&gt;contentPane()-&gt;captureEnd('pane2');

    // Third tab "Closable"
    $this-&gt;contentPane()-&gt;captureStart('pane3', array(), array('title' =&gt; 'Podání projektu'));
        echo $this-&gt;form-&gt;getSubform('page2');
    echo $this-&gt;contentPane()-&gt;captureEnd('pane3');

    // Fourth tab "Splitted"
    $this-&gt;contentPane()-&gt;captureStart('pane4', array(), array('title' =&gt; 'Realizace projektu'));
      echo $this-&gt;form-&gt;getSubform('page3');
    echo $this-&gt;contentPane()-&gt;captureEnd('pane4');

echo $this-&gt;tabContainer()-&gt;captureEnd('tab1');

echo $this-&gt;form-&gt;submit;

echo "&lt;/form&gt;"
?&gt;
</pre>


<p> </p>

<p>Je to složitější ale všechno vypadalo jak mělo, jen byl problém s poslední stranou formuláře. Je tam málo položek a tabContainer se neumí přizpůsobit výšce vloženého obsahu. To se mi nepodařilo vyřešit jinak než nahradit Dojo <a href="http://docs.jquery.com/UI/Tabs">jQuery UI</a>, který jsem byl zvyklý používat doteď.</p>

<pre name='code' class='php'>
  &lt;script&gt;
  $(document).ready(function(){
    $("#example &gt; ul").tabs();
  });
  &lt;/script&gt;
&lt;?php
foreach ($this-&gt;notice as $n) {
    echo '&lt;div class="error"&gt;'.$n . '&lt;/div&gt;';
}
echo "&lt;form method='".$this-&gt;form-&gt;getMethod()."' enctype='application/x-www-form-urlencoded' &gt;";

// Container with tabs
?&gt;
  &lt;div id="example" class="flora"&gt;
            &lt;ul&gt;
                &lt;li&gt;&lt;a href="#page-1"&gt;&lt;span&gt;Vstupní evidence&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href="#page-2"&gt;&lt;span&gt;Příprava rozpočtu&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href="#page-3"&gt;&lt;span&gt;Podání projektu&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href="#page-4"&gt;&lt;span&gt;Realizace projektu&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
            &lt;div id="page-1"&gt;
            &lt;?php echo $this-&gt;form-&gt;getSubform('page1'); ?&gt;
            &lt;/div&gt;
            &lt;div id="page-2"&gt;
            &lt;?php
                  echo "&lt;div style='padding:1em;'&gt;";
                  include("../application/views/scripts/index/rozpocet.phtml");
                  echo "&lt;/div&gt;";
            ?&gt;
            &lt;/div&gt;
            &lt;div id="page-3"&gt;
            &lt;?php echo $this-&gt;form-&gt;getSubform('page2'); ?&gt;
            &lt;/div&gt;
            &lt;div id="page-4"&gt;
            &lt;?php echo $this-&gt;form-&gt;getSubform('page3'); ?&gt;
            &lt;/div&gt;
        &lt;/div&gt;
&lt;?php
echo $this-&gt;form-&gt;submit;
echo "&lt;/form&gt;";

?&gt;
</pre>


<p> </p>

<p>Po úpravě stylu to vypadá jinak, ale je to funkční jak chci a přesně kopíruje rozměry formuláře. </p>

<p><a href="http://blog.prskavec.net/wp-content/uploads/2008/09/image2.png"></a></p>

<p>Přijde mi, že v Dojo je spousta jednoduchých věcí jako jsou třeba ty taby zatím celkem nedotažené. Co si myslíte o té integraci ZF s Dojo?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/subversion-pro-kazdho/">Subversion pro každého</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-28T00:00:00+02:00" pubdate data-updated="true">28. 07. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Protože jsem v češtině nenašel žádnou knihu, kterou bych mohl strčit do ruky někomu kdo se mě ptá jak začít pracovat se Subversion a návody na webu nejsou zcela ucelené, tak jsem se rozhodl <a href="http://svn.prskavec.net">napsat takovou příručku pro každého</a> kdo chce se Subversion pracovat.</p>

<p>Nesnažím se o překlad <a href="http://svnbook.red-bean.com/">SVN book</a> i když ten by této knize výrazně pomohl, ale snažím se shrnout postupy a praxe co nejjednodušeji, aby to začátečník pochopil. Já už se SVN, ale dělám delší čas a nemám potřebný odstup a proto budu vděčný za zpětnou vazbu co týká obsahu, co přidat a co je zbytečné a případných chyb.</p>

<p>Ke psaní jsem použil <a href="http://www.docbook.cz">Docbook</a> a jako editor XMLmind, PSPad a SciTE. Do html převádím docbook za pomoci PHP tímto jednoduchým skriptem.</p>

<pre name='code' class="php">
&lt;?php
$xml_filename="svn-kniha.xml";
$xsl_filename="c:\Program Files\XMLmind_XML_Editor\addon\config\docbook\xsl\xhtml\docbook.xsl";

$doc = new DOMDocument();
$xsl = new XSLTProcessor();

$doc-&gt;load($xsl_filename);
$xsl-&gt;importStyleSheet($doc);

$doc-&gt;load($xml_filename);

file_put_contents("index.html",str_replace("&lt;/head&gt;","&gt;&lt;link href='default.css' type='text/css' rel='stylesheet' /&gt;
&lt;/head&gt;",$xsl-&gt;transformToXML($doc)));

?&gt;
</pre>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/gettext-a-php/">Gettext a PHP</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-15T00:00:00+02:00" pubdate data-updated="true">15. 07. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Gettext je Open Source nástroj na překlad aplikací. Kdo s tímto nástrojem pracuje může můj článek rovnou vynechat, protože tyto věci zná.</p>

<p>Getext má jedinou nevýhodu, kterou lze celkem přejít, nejde přímo lidsky číst, ukládájí se v binárním tvaru do souboru s příponou *.mo. Pokud používáte nějakou vlastní metodu pro překlad určitě to bude něco z toho co nabízí Zend Framework (ZF) v Zend_Translate (pole, csv, xml – tbx, xliff, xmltm, gettext) nebo nějakou metodu založenou na databázi. Sám jsem zkusil během let většinu těchto metod a celkem se s nimi pracovalo dobře pokud se aplikace moc nerozrostla a případně pokud neměl překládat někdo kdo neuměl pracovat s prostředím ve kterém jsem pracoval.</p>

<p>Na Gettextu se mi líbí hlavně aplikace pro editaci <a href="http://www.poedit.net">poEdit</a>. Aplikace umí parsovat zdrojové kódy pro překlad. To je asi nejlepší co moje dřívější metody nikdy neměli, gettext si najde sám co překládat a umožňuje použít už hotové překlady pro automatické překlady.</p>

<p>Pro práci s Gettextem potřebujete buď ZF nebo extenze pro gettext. ZF v 1.5 zatím nepodporuje množná čísla.</p>

<p>Ukázka použití getextu jako extenze PHP.</p>

<pre>

</pre>


<p>V ZF nemusíte tak striktně dodržovate cesty a práce s gettextem je obdobná.</p>

<pre>setLocale('cs');

// tisk

echo $t-&gt;_(‘Vítejete v aplikaci’);

?&gt;
</pre>


<p>Aplikace poEdit je podle mě asi nejznámější a teké nejlepší pro práci s Gettextem, edituje soubory zdrojové v <em>.po a kompiluje výsledek do </em>.mo při ukládání. Je potřeba jen mít správně nastavené cesty k projektu se kterým právě pracujete.</p>

<p>Pro práci s ZF je jen potřeba přidat pro v konfiguraci další koncovky do PHP parseru, já jsem používal překlad kromě php skriptech také v v phtml. Bez úpravy nastavení by nenašel xgettext vaše řetězce k předkladu.</p>

<p><a href="http://blog.prskavec.net/wp-content/uploads/2008/07/image1.png"></a></p>

<p>Osobně se mi líbí na gettextu, že můžu mít poEdit současně otevřený s Eclipse nebo jiným editorem a překlady průběžně doplňovat a když je to větší projekt tak jednoduše to celé dělám v jednom jazyce případně v CZ, EN variantě a potom může kdokoliv lehce přeložit text do dalšího jazyka.</p>

<p>Zdrojáky ukázky jsou ke stažení na <a href="http://ladislav.prskavec.net/download/gettext.zip">zip archivu</a>.</p>

<p>V ZF 1.6 budou změny v <a href="http://weblog.ronnieweb.net/index.php?text=21-nove-view-helpery-a-zmeny-v-zend-translate-v-zend-frameworku-1-6">Zend_Translate</a>.</p>

<p>Používá někdo nějakou vlastní metodu s parsováním pro překlad textů obdobně jako to dělá getext?</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page//page/11/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/page//page/9/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <ul id="recent_posts">
      <li class="post">
      <a href="http://blog.prskavec.net" alt="Home"><img class="icons" src="/images/Home.png" ></a>
      <a href="http://blog.prskavec.net/archives/" alt="Archives"><img  class="icons" src="/images/Calendar.png"></a>
      <a href="mailto:ladislav@prskavec.net" alt="E-Mail"><img  class="icons" src="/images/Envelope.png"></a>
      <a href="http://blog.prskavec.net/atom.xml" alt="subscribe feed"><img class="icons" src="/images/rss_big.png"></a>
      </li>
  </ul>
</section>
<section>
  <h1>Ladislav Prskavec</h1>
  <p style="margin-top:6px;"><img src="/images/avatar.jpg" style="float:left; margin-right:10px;" width="100" height="115" /><a href="http://github.com/abtris/">Programátor</a>, otec, <a href="http://www.dzogchen.cz">buddhista</a>, milovník dobrého jídla, knih, nových technologí a hraček pro všechny s&nbsp;duší dítěte.
</p>
  <br style="clear:left;"/>
</section>
<section>
  <h1>Poslední příspěvky</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2016/02/suchy-docker/">Suchý docker</a>
      </li>
    
      <li class="post">
        <a href="/2015/12/nastroje-co-pouzivam-pro-vyvoj-a-spravu/">Nástroje co používám pro vývoj a správu</a>
      </li>
    
      <li class="post">
        <a href="/2015/09/porovnani-implementace-microservice-v-nodejs-and-go-lang/">Porovnání implementace service v NodeJS a Go lang</a>
      </li>
    
      <li class="post">
        <a href="/2015/05/amazon-elastic-beanstalk-a-docker/">Amazon Elastic Beanstalk a docker</a>
      </li>
    
      <li class="post">
        <a href="/2015/02/docker-cluster-management/">Docker cluster management</a>
      </li>
    
      <li class="post">
        <a href="/2014/12/zapier-a-zasilani-zustatku-z-banky-zdarma-na-mobil/">Zapier a zasílání zůstatku z banky zdarma na mobil</a>
      </li>
    
      <li class="post">
        <a href="/2014/01/git-a-pre-commit-hook-pro-kontrolu-syntaxe-v-mnoha-jazycich/">Git a pre-commit hook pro kontrolu syntaxe</a>
      </li>
    
      <li class="post">
        <a href="/2013/11/docker/">docker</a>
      </li>
    
      <li class="post">
        <a href="/2013/09/jenkins-polling-a-git-notify/">Jenkins polling a git-notify</a>
      </li>
    
      <li class="post">
        <a href="/2013/08/firebase-a-angularjs/">Firebase a AngularJS</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Subversion</h1>
  <p style="margin-top:6px; text-align:center"><a href="http://itunes.apple.com/cz/book/subversion/id498008712?mt=11" onClick="_gaq.push(['_trackEvent', 'link', 'itunes/subversion', 'svn-promo-sidebar-vpravo']);"><img src="http://a2.mzstatic.com/us/r30/Publication/v4/5c/1a/66/5c1a667d-2f78-b9b2-31ec-7c06ab9b74e8/B_SUBVERSION.225x225-75.jpg" style="float:left; margin-right:10px; width:172px; height:225px;" /></a>
</p>
  <br style="clear:left;"/>
</section>

<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/+LadislavPrskavec?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<section>
  <h1>GitHub</h1>

<iframe src="http://githubbadge.appspot.com/badge/abtris" style="border: 0;height: 142px;width: 200px;overflow: hidden;" frameBorder=0></iframe>

</section>
<section>
  <h1>Twitter</h1>
  <a class="twitter-timeline" width="250" height="500" href="https://twitter.com/abtris" data-widget-id="345276838232326144">Tweets by @abtris</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Ladislav Prskavec -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-79221-21']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter21617953 = new Ya.Metrika({id:21617953,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/21617953" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->


<script type="text/javascript">
      var disqus_shortname = 'prskavecblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/javascripts/all.js?v=1412111651"></script>



</body>
</html>
