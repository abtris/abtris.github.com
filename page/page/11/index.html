
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Prskavčí blog</title>
  <meta name="author" content="Ladislav Prskavec">

  
  <meta name="description" content="Jak jsem psal v Zend Framework 1.6 a moje zkušenosti s Dojo TabContainer, nakonec jsem použil jQuery. Ve formuláři se dají měnit některá data, které &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.prskavec.net/page//page/11/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/all.css?v=1412111641" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/feed/index.html" rel="alternate" title="Prskavčí blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
<meta name="google-site-verification" content="mepQHhq6JPqzvIjErdB-A6hp3UKAYIlYHN7xPUL8JUM" />

  
</head>

<body   >
  <header role="banner"><hgroup>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/feed/index.html" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.prskavec.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archív</a></li>
  <li><a href="/prednasky">Přednášky</a></li>
  <li><a href="/skoleni-a-kurzy">Školení a kurzy</a></li>
  <li><a href="/kontakt">Kontakt</a></li>
</ul>

</nav> 
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/09/zend-framework-16-a-ajax-pomoc-jquery/">Zend Framework 1.6 a ajax pomocí jQuery</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-23T00:00:00+02:00" pubdate data-updated="true">23. 09. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Jak jsem psal v <a href="http://blog.prskavec.net/?p=163">Zend Framework 1.6 a moje zkušenosti s Dojo TabContainer</a>, nakonec jsem použil jQuery. Ve formuláři se dají měnit některá data, které jsou závislá na dalších, které automaticky předvyplňuji a na to jsem použil při změnách ajax. Docela mě potěšilo jak jednoduše a pěkně se to dá udělat pomocí <a href="http://jquery.com/">jQuery</a>.</p>

<pre name='code' class="php">&lt;script&gt;
$(document).ready(function(){
     $("#example &gt; ul").tabs();
     $('#page1-deadline_vyzva').datepicker();
     $('#page3-datum_zahajeni').datepicker();
     $('#page3-datum_ukonceni').datepicker();

      $('#page1-editor').change(function(){
             $.ajax({
                        type: "POST",
                        url: "&lt;?php echo $this-&gt;baseUrl();?&gt;/user/info/idcvut/" + $(this).val(),
                        success: function(xml){
                    if ($.browser.msie)
                    {
                        xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
                        xmlDoc.async="false";
                        xmlDoc.loadXML(xml);
                        $("#page1-navrhovatel_jmeno")[0].value = xmlDoc.getElementsByTagName("name")[0].childNodes[0].nodeValue;
                        $("#page1-navrhovatel_email")[0].value = xmlDoc.getElementsByTagName("email")[0].childNodes[0].nodeValue;
                        $("#page1-navrhovatel_telefon")[0].value = xmlDoc.getElementsByTagName("phone")[0].childNodes[0].nodeValue;
                        $("#page1-navrhovatel_pracoviste")[0].value = xmlDoc.getElementsByTagName("dept")[0].childNodes[0].nodeValue;
                    }
                    else
                    {
                    $("#page1-navrhovatel_jmeno")[0].value = $("name", xml).text();
                    $("#page1-navrhovatel_email")[0].value = $("email", xml).text();
                    $("#page1-navrhovatel_telefon")[0].value = $("phone", xml).text();
                    $("#page1-navrhovatel_pracoviste")[0].value = $("dept", xml).text();
                    }
                        }
             }); // end ajax
      }); // end change function
}); // end document ready
&lt;/script&gt;
...</pre>


<p>Původní skript jsem rošířil o několik dalších funkcí, přidal jsem datapickery pro datumy a potom ten ajax. Nejprve pomocí vybere prvek a přidáme mu attribut onChange.</p>

<pre name='code' class="javascript">$('#page1-editor').change(function(){ … });</pre>


<p>Do této funkce jsem vložil volání ajaxu. Je to jednoduché a dobře pochopitelné. Type je typ GET nebo POST, v url je URL Controlleru, který vrací XML s potřebnými daty. Pomocí $(this.val) si šáhnu na vyplněnou hodnotu v políčku na které jsem aplikoval onChange(). Success vrací data, které si jednoduše parsuji přes $(&ldquo;name&rdquo;, xml).text(), kde name je &lt;name&gt;&lt;/name&gt; z xml dat, které posílá php.</p>

<p>Je to jednoduché a moc pěkný kód, který najde uplatnění. Dobré je, že není potřeba do formuláře přidávat do atributů funkci onchange, jak jsem to musel dělat, když jsem nepoužívat jQuery.</p>

<p>Ještě přidám část kódu z controlleru:</p>

<pre name='code' class="php">…
function infoAction()
{
$this-&gt;_helper-&gt;layout-&gt;disableLayout();
$this-&gt;_helper-&gt;getHelper('ViewRenderer')-&gt;setNoRender();
$idcvut = (int)$this-&gt;_request-&gt;getParam('idcvut');
//echo $idcvut;
$ssu = new Usermap($this-&gt;config);
// make xml
//Zend_Debug($i);
$i=$ssu-&gt;getUsermapInfoByID($idcvut);
$xml = '&lt;user&gt;&lt;name&gt;'.$i[‘cn’].'&lt;/name&gt;&lt;email&gt;'.$i['email'].'&lt;/email&gt;&lt;phone&gt;'.$i[‘phone’].'&lt;/phone&gt;&lt;dept&gt;'.$i[‘department’].'&lt;/dept&gt;&lt;/user&gt;';
echo $xml;
}
…</pre>


<p>Snad to někomu pomůže, moc příkladů na Zend a jQuery ajax jsem nikde nenašel.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/09/zend-framework-16-a-moje-zkuenosti-s-dojo-tabcontainer/">Zend Framework 1.6 a moje zkušenosti s Dojo TabContainer</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-11T00:00:00+02:00" pubdate data-updated="true">11. 09. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Zrovna dělám na jednom malém projektu, který jsem hned začal psát zrovna jak vyšel ZF 1.6, celkem standardní věci až na to, že jsem potřeboval rozdělit formulář na více stránek a udělat záložky.</p>

<p>Postupoval jsem <a href="http://framework.zend.com/manual/en/zend.dojo.form.html#zend.dojo.form.decorators.dijitContainer">podle manulálu</a>, vyvořil jsem si formulář se subformy a celkem to dobře funguje. Potom když jsem potřeboval rozbrazit záložky narazil jsem na několik problémů se kterými jsem si různě poradil.</p>

<p>Takto vypadají <a href="http://dojotoolkit.org/book/dojo-book-0-9/part-2-dijit/layout/tab-container">záložky pomocí Dojo frameworku</a>.</p>

<p><a href="http://blog.prskavec.net/wp-content/uploads/2008/09/image.png"></a></p>

<p>Nejdříve byl problém přidat záložku kde byl jen text. Tak jsem vytvořil vlastní element a ten potom vracel jen co jsem do něj napsal za text. Dalším problémem byl konec fomuláře jak je vidět na obrázku tak špatně uzavíral a číst ho mizela.</p>

<p><a href="http://blog.prskavec.net/wp-content/uploads/2008/09/image1.png"></a></p>

<p>To jsem opravil tak, že jsem celou strukturu záložek přesunul do View.</p>

<pre name='code' class='php'>
&lt;?php echo $this-&gt;form; ?&gt;
</pre>


<p>jsem musel udělat</p>

<pre name='code' class='php'>
&lt;?php
$this-&gt;dojo()-&gt;enable();

echo "&lt;form method='".$this-&gt;form-&gt;getMethod()."' enctype='application/x-www-form-urlencoded' &gt;";

// Container with tabs
$this-&gt;tabContainer()-&gt;captureStart('tab1', array(), array('style' =&gt; 'width:950px;height:800px;'));

    // First tab "Dates"
    $this-&gt;contentPane()-&gt;captureStart('pane1', array(), array('title' =&gt; 'Vstupní evidence'));
        echo $this-&gt;form-&gt;getSubform('page1');
    echo $this-&gt;contentPane()-&gt;captureEnd('pane1');

    // Second tab "FAQ"
    $this-&gt;contentPane()-&gt;captureStart('pane2', array(), array('title' =&gt; 'Příprava rozpočtu'));
      echo $this-&gt;form-&gt;getSubform('page4');     
    echo $this-&gt;contentPane()-&gt;captureEnd('pane2');

    // Third tab "Closable"
    $this-&gt;contentPane()-&gt;captureStart('pane3', array(), array('title' =&gt; 'Podání projektu'));
        echo $this-&gt;form-&gt;getSubform('page2');
    echo $this-&gt;contentPane()-&gt;captureEnd('pane3');

    // Fourth tab "Splitted"
    $this-&gt;contentPane()-&gt;captureStart('pane4', array(), array('title' =&gt; 'Realizace projektu'));
      echo $this-&gt;form-&gt;getSubform('page3');
    echo $this-&gt;contentPane()-&gt;captureEnd('pane4');

echo $this-&gt;tabContainer()-&gt;captureEnd('tab1');

echo $this-&gt;form-&gt;submit;

echo "&lt;/form&gt;"
?&gt;
</pre>


<p> </p>

<p>Je to složitější ale všechno vypadalo jak mělo, jen byl problém s poslední stranou formuláře. Je tam málo položek a tabContainer se neumí přizpůsobit výšce vloženého obsahu. To se mi nepodařilo vyřešit jinak než nahradit Dojo <a href="http://docs.jquery.com/UI/Tabs">jQuery UI</a>, který jsem byl zvyklý používat doteď.</p>

<pre name='code' class='php'>
  &lt;script&gt;
  $(document).ready(function(){
    $("#example &gt; ul").tabs();
  });
  &lt;/script&gt;
&lt;?php
foreach ($this-&gt;notice as $n) {
    echo '&lt;div class="error"&gt;'.$n . '&lt;/div&gt;';
}
echo "&lt;form method='".$this-&gt;form-&gt;getMethod()."' enctype='application/x-www-form-urlencoded' &gt;";

// Container with tabs
?&gt;
  &lt;div id="example" class="flora"&gt;
            &lt;ul&gt;
                &lt;li&gt;&lt;a href="#page-1"&gt;&lt;span&gt;Vstupní evidence&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href="#page-2"&gt;&lt;span&gt;Příprava rozpočtu&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href="#page-3"&gt;&lt;span&gt;Podání projektu&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href="#page-4"&gt;&lt;span&gt;Realizace projektu&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
            &lt;div id="page-1"&gt;
            &lt;?php echo $this-&gt;form-&gt;getSubform('page1'); ?&gt;
            &lt;/div&gt;
            &lt;div id="page-2"&gt;
            &lt;?php
                  echo "&lt;div style='padding:1em;'&gt;";
                  include("../application/views/scripts/index/rozpocet.phtml");
                  echo "&lt;/div&gt;";
            ?&gt;
            &lt;/div&gt;
            &lt;div id="page-3"&gt;
            &lt;?php echo $this-&gt;form-&gt;getSubform('page2'); ?&gt;
            &lt;/div&gt;
            &lt;div id="page-4"&gt;
            &lt;?php echo $this-&gt;form-&gt;getSubform('page3'); ?&gt;
            &lt;/div&gt;
        &lt;/div&gt;
&lt;?php
echo $this-&gt;form-&gt;submit;
echo "&lt;/form&gt;";

?&gt;
</pre>


<p> </p>

<p>Po úpravě stylu to vypadá jinak, ale je to funkční jak chci a přesně kopíruje rozměry formuláře. </p>

<p><a href="http://blog.prskavec.net/wp-content/uploads/2008/09/image2.png"></a></p>

<p>Přijde mi, že v Dojo je spousta jednoduchých věcí jako jsou třeba ty taby zatím celkem nedotažené. Co si myslíte o té integraci ZF s Dojo?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/subversion-pro-kazdho/">Subversion pro každého</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-28T00:00:00+02:00" pubdate data-updated="true">28. 07. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Protože jsem v češtině nenašel žádnou knihu, kterou bych mohl strčit do ruky někomu kdo se mě ptá jak začít pracovat se Subversion a návody na webu nejsou zcela ucelené, tak jsem se rozhodl <a href="http://svn.prskavec.net">napsat takovou příručku pro každého</a> kdo chce se Subversion pracovat.</p>

<p>Nesnažím se o překlad <a href="http://svnbook.red-bean.com/">SVN book</a> i když ten by této knize výrazně pomohl, ale snažím se shrnout postupy a praxe co nejjednodušeji, aby to začátečník pochopil. Já už se SVN, ale dělám delší čas a nemám potřebný odstup a proto budu vděčný za zpětnou vazbu co týká obsahu, co přidat a co je zbytečné a případných chyb.</p>

<p>Ke psaní jsem použil <a href="http://www.docbook.cz">Docbook</a> a jako editor XMLmind, PSPad a SciTE. Do html převádím docbook za pomoci PHP tímto jednoduchým skriptem.</p>

<pre name='code' class="php">
&lt;?php
$xml_filename="svn-kniha.xml";
$xsl_filename="c:\Program Files\XMLmind_XML_Editor\addon\config\docbook\xsl\xhtml\docbook.xsl";

$doc = new DOMDocument();
$xsl = new XSLTProcessor();

$doc-&gt;load($xsl_filename);
$xsl-&gt;importStyleSheet($doc);

$doc-&gt;load($xml_filename);

file_put_contents("index.html",str_replace("&lt;/head&gt;","&gt;&lt;link href='default.css' type='text/css' rel='stylesheet' /&gt;
&lt;/head&gt;",$xsl-&gt;transformToXML($doc)));

?&gt;
</pre>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/gettext-a-php/">Gettext a PHP</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-15T00:00:00+02:00" pubdate data-updated="true">15. 07. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Gettext je Open Source nástroj na překlad aplikací. Kdo s tímto nástrojem pracuje může můj článek rovnou vynechat, protože tyto věci zná.</p>

<p>Getext má jedinou nevýhodu, kterou lze celkem přejít, nejde přímo lidsky číst, ukládájí se v binárním tvaru do souboru s příponou *.mo. Pokud používáte nějakou vlastní metodu pro překlad určitě to bude něco z toho co nabízí Zend Framework (ZF) v Zend_Translate (pole, csv, xml – tbx, xliff, xmltm, gettext) nebo nějakou metodu založenou na databázi. Sám jsem zkusil během let většinu těchto metod a celkem se s nimi pracovalo dobře pokud se aplikace moc nerozrostla a případně pokud neměl překládat někdo kdo neuměl pracovat s prostředím ve kterém jsem pracoval.</p>

<p>Na Gettextu se mi líbí hlavně aplikace pro editaci <a href="http://www.poedit.net">poEdit</a>. Aplikace umí parsovat zdrojové kódy pro překlad. To je asi nejlepší co moje dřívější metody nikdy neměli, gettext si najde sám co překládat a umožňuje použít už hotové překlady pro automatické překlady.</p>

<p>Pro práci s Gettextem potřebujete buď ZF nebo extenze pro gettext. ZF v 1.5 zatím nepodporuje množná čísla.</p>

<p>Ukázka použití getextu jako extenze PHP.</p>

<pre>

</pre>


<p>V ZF nemusíte tak striktně dodržovate cesty a práce s gettextem je obdobná.</p>

<pre>setLocale('cs');

// tisk

echo $t-&gt;_(‘Vítejete v aplikaci’);

?&gt;
</pre>


<p>Aplikace poEdit je podle mě asi nejznámější a teké nejlepší pro práci s Gettextem, edituje soubory zdrojové v <em>.po a kompiluje výsledek do </em>.mo při ukládání. Je potřeba jen mít správně nastavené cesty k projektu se kterým právě pracujete.</p>

<p>Pro práci s ZF je jen potřeba přidat pro v konfiguraci další koncovky do PHP parseru, já jsem používal překlad kromě php skriptech také v v phtml. Bez úpravy nastavení by nenašel xgettext vaše řetězce k předkladu.</p>

<p><a href="http://blog.prskavec.net/wp-content/uploads/2008/07/image1.png"></a></p>

<p>Osobně se mi líbí na gettextu, že můžu mít poEdit současně otevřený s Eclipse nebo jiným editorem a překlady průběžně doplňovat a když je to větší projekt tak jednoduše to celé dělám v jednom jazyce případně v CZ, EN variantě a potom může kdokoliv lehce přeložit text do dalšího jazyka.</p>

<p>Zdrojáky ukázky jsou ke stažení na <a href="http://ladislav.prskavec.net/download/gettext.zip">zip archivu</a>.</p>

<p>V ZF 1.6 budou změny v <a href="http://weblog.ronnieweb.net/index.php?text=21-nove-view-helpery-a-zmeny-v-zend-translate-v-zend-frameworku-1-6">Zend_Translate</a>.</p>

<p>Používá někdo nějakou vlastní metodu s parsováním pro překlad textů obdobně jako to dělá getext?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/ankhsvn-20-je-konecne-finln/">AnkhSVN 2.0 je konečně finální</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-10T00:00:00+02:00" pubdate data-updated="true">10. 07. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://ankhsvn.open.collab.net/">AnkhSVN</a> je SVN klient pro Visual Studio,&#160; verze 2.0 přináší kromě řady vylepšení podporu <a href="http://blog.prskavec.net/?p=141">Subversion 1.5</a>. Vyžaduje VS2005 a vyšší. Myslím, že to je dobrá správa pro všechny kdo VS a SVN používají.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/netbeans-pdt-a-subversion-15/">NetBeans, PDT a Subversion 1.5</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-01T00:00:00+02:00" pubdate data-updated="true">01. 07. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Před časem, jsem přešel z <a href="http://www.eclipse.org/pdt/">Eclipse PDT</a> na <a href="http://php.netbeans.org/">NetBeans IDE Early Access for PHP</a> a to hlavně z důvodu, že projektový adresář je umístněný libovolně mimo zdrojové kódy a také pro lepší práci se subversion než mi poskytoval <a href="http://subclipse.tigris.org/">Subclipse</a>. Když vyšel nový Subversion 1.5 měl jsem obavy, že budu muset čekat na novou verzi pluginu pro Subversion jako je to u PDT. </p>


<p>  <p>Subclipse 1.4.x pro Eclipse je už venku, tak to naštěstí u PDT není problém. Ale jak to je u NetBeans, čekám na říjen kdy má být verze 6.5 s podporou PHP, ale dosavadní funkčnost mi celkem vyhovuje, asi je to tím, že stejně edituji nejvíce v <a href="http://www.pspad.com/cz/">PsPadu</a> a <a href="http://php.vrana.cz/editor-scite.php">SciTE</a>.</p>  <p>NetBeans, ale s Subversion 1.5 fungují bez problémů a to proto, že potřebují ke svému běhu jen binární soubory Subversion,&#160; používají totiž běžného řádkového klienta. Tak pokud odinstalujete starou verzi Subversion a nainstalujete novou, stačí potom nastavit cestu do $PATH, případně se vás NetBeans zeptají kde Subversion najdou. Jednoduché a geniální. </p>  <p>Samozřejmě to má i svoje nevýhody, podporují se základní funkčnosti a až v dalších verzích budou, doufám, k dispozici funkce, které jsou v klientu nové (changelisty, merge tracking atd.). Klient v NetBeansech nemá implementovány i další vlastnosti jako nemožnost propojení s Issue trackerem jak je možné v Subclipsu nebo TSVN. Já primárně používám TSVN a proto mi tyto necnosti příliš nevadí s spíše se mi líbí diff přímo při editaci, ukázání anotací apod. Náhled na používání Subversion v NetBeans je na obrázku. </p>  <p><a href="http://blog.prskavec.net/wp-content/uploads/2008/07/image.png"></a> </p>  <p>Jak jsou na tom ostatní prostředí Komodo IDE, Zend? Těším se na komentáře.</p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/06/phing-svnlogtask/">Phing - SvnLogTask</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-29T00:00:00+02:00" pubdate data-updated="true">29. 06. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://phing.info/trac/">Phing</a> obsahuje ve verzi 2.3 tyto Tasky pro práci se Subversion.</p>

<ul>
    <li>SvnCheckoutTask</li>
    <li>SvnExportTask</li>
    <li>SvnLastRevisionTask</li>
    <li>SvnUpdateTask</li>
</ul>


<p>To se hodí a také ve svém buildu používám tento postup:</p>

<ol>
    <li>udělám export HEAD revision (SvnExportTask)</li>
    <li>načtu si číslo HEAD revision (SvnLastRevisionTask)</li>
    <li>potom vygeneruju SVN Log (<strong>SvnLogTask</strong>)</li>
    <li>vygeneruju API dokumentaci pro build (PhpDocumentorTask)</li>
    <li>všechno zakomprimuji do souboru s dokumentací a se zdrojáky a uložím kam potřebuju (ZipTask)</li>
</ol>


<p>V postupu je něco co není standardní součástí <a href="http://phing.info/docs/guide/current/">Phingu</a> i když si myslím, že se to tam objeví. Phing pro práci se SVN používá <a href="http://pear.php.net/package/VersionControl_SVN/">VersionControl_SVN</a> 0.3.1 alpha. Bohužel neexistuje zatím stable verze této PEAR knihovny což je škoda, protože funguje celkem dobře a má implementováno vše co potřebuji. Když používáte VersionControl_SVN dá se pracovat s několika návratovými typy:</p>

<ul>
    <li>VERSIONCONTROL_SVN_FETCHMODE_ASSOC,</li>
    <li>VERSIONCONTROL_SVN_FETCHMODE_OBJECT,</li>
    <li>VERSIONCONTROL_SVN_FETCHMODE_XML,</li>
    <li>VERSIONCONTROL_SVN_FETCHMODE_RAW,</li>
    <li>VERSIONCONTROL_SVN_FETCHMODE_ALL,</li>
    <li>VERSIONCONTROL_SVN_FETCHMODE_ARRAY</li>
</ul>


<p>V Phingu se používá, ale výhradně VERSIONCONTROL_SVN_FETCHMODE_ASSOC což není někdy úplně vhodné. V případě, že máte totiž zapnutý přepínač pro výpis v XML je lepší návratový typ VERSIONCONTROL_SVN_FETCHMODE_XML. Proto jsem musel upravit <code>phing\tasks\ext\svn\SvnBaseTask.php</code>.</p>

<p>Tuto část</p>

<pre name='code' class="php">
$options = array('fetchmode' => VERSIONCONTROL_SVN_FETCHMODE_ASSOC, 'svn_path' => $this->getSvnPath());
</pre>


<p>jsem nahradil tímto kódem</p>

<pre name='code' class="php">
        // Set up runtime options. Will be passed to all
        // subclasses.
        if ($mode=="log")
        {
        $options = array('fetchmode' => VERSIONCONTROL_SVN_FETCHMODE_XML, 'svn_path' => $this->getSvnPath());       
        }
        else
        {
        $options = array('fetchmode' => VERSIONCONTROL_SVN_FETCHMODE_ASSOC, 'svn_path' => $this->getSvnPath());
        }
</pre>


<p>Po této úpravě, která jistě by šla udělat lépe. Jsem se dal do psaní vlastního tasku SvnLogTask.php. Task vrátí log z repozitory v XML formátu. Pokud chceme plain text, tak to prožene XSLT transformací a potom ještě vymaže whitespaces z celého dokumentu.</p>

<pre name='code' class="php">
require_once 'phing/Task.php';
require_once 'phing/tasks/ext/svn/SvnBaseTask.php';

class SvnLogTask extends SvnBaseTask
{
    private $name = 'log.xml';
    private $xml = true;
    private $verbose = false;
    /**
     * The setter for the attribute "name"
     */
    public function setName($str) {
        $this->name = $str;
    }
    /**
     * The setter for the attribute "xml"
     */
    public function setXML($str) {
        $this->xml = $str;
    }   
    /**
     * The setter for the attribute "verbose"
     */
    public function setVerbose($str) {
        $this->verbose = $str;
    }       
    /**
     * The main entry point
     *
     * @throws BuildException
     */
    function main()
    {
        $this->setup('log');
        $this->log("Log SVN"); 
       
         $switches = array('verbose' => $this->verbose);
         $output=$this->run(array(), $switches);

        $doc = new DOMDocument();
        $doc->formatOutput = true;        
        $doc->loadXML($output);             
        // output format 
        
        if ($this->xml=="true")
        {        
          $doc->save($this->getToDir()."/".$this->name);
        }
        else
        {                 
         // print in plain
         $xsl = new DOMDocument;
         $xsl->load(dirname(__FILE__).'\LogTxt.xsl');
         $proc = new XSLTProcessor;
         $proc->importStyleSheet($xsl); // attach the xsl rules
         $output=$proc->transformToDoc($doc)->firstChild->wholeText;

         $pat[0] = "/^\s+/";
         $pat[1] = "/\s{2,}/";
         $pat[2] = "/\s+\$/";
         $rep[0] = "";
         $rep[1] = " ";
         $rep[2] = "";
         $after=preg_replace($pat, $rep, $output);
         $str=str_replace("\\n ","\n", $after);         
         file_put_contents($this->getToDir()."/".$this->name,$str);
        }
    }
}
</pre>


<p>Potom se to dá už použít v <code>build.xml</code>.</p>

<pre name='code' class="xml">
        &lt;taskdef name="svnlog" classname="phing.tasks.ext.svn.SvnLogTask" /&gt;
        &lt;svnlog
           svnpath="${svnpath}"
           repositoryurl="${rep}"
           name="CHANGELOG"
           xml="true"
           verbose="true"
           todir="${tmp}\log"/&gt;
</pre>


<p>Moje vlastní XSLT transformace (<code>phing\tasks\ext\svn\LogTxt.xsl</code>) na plain text není přiliš vhodná pro nějaké systémové řešení. Lepší je parametr nechat zapnutý. Vzít XML a pomocí XsltFilter aplikovat vlastní transformaci.</p>

<pre name='code' class="xml">
&lt;?xml version="1.0"?&gt;
&lt;xsl:stylesheet version="1.0" 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
 
&lt;xsl:template match="log"&gt;                
            CHANGELOG\n
            &lt;xsl:apply-templates select='logentry'/&gt;
&lt;/xsl:template&gt;
 
 
&lt;xsl:template match="logentry"&gt;       
            \n R&lt;xsl:apply-templates select='@revision'/&gt;\n
            &lt;xsl:apply-templates select='date' /&gt; - &lt;xsl:apply-templates select='author'/&gt;\n
            &lt;xsl:apply-templates select='msg'/&gt;\n         
&lt;/xsl:template&gt;
 
&lt;/xsl:stylesheet&gt;
</pre>


<p>Nakonec přidám ještě moje build.propeties a buid.xml jednoho moje projektu pro ilustraci.</p>

<pre name='code' class="bash">
# Property files contain key/value pairs
# key=value
tmp = c:\tmp
svnpath = c:\apps\svn\bin\svn.exe
rep = file:///rootwww/rep_cvut/akce/trunk
wc =  c:\rootwww\wc_cvut\akce
</pre>


<p>Tady v build.propeties si všimněte jen jediného detailu, ale ten vás může stát hodně času. Cesty k svn a k repozitory neobsahují mezery, pokud máte Subversion např. v Program Files může to nadělat více problémů než užitku a chyby se projevují různě a ne zcela systémově. Doporučuji se tomu předem vyhnout, ušetříte si čas a nervy.</p>

<pre name='code' class="xml">
&lt;?xml version="1.0" ?&gt;
&lt;project name="akce2" basedir="." default="main"&gt;

    &lt;!-- Sets the DSTAMP, TSTAMP and TODAY properties --&gt;  
    &lt;tstamp/&gt;  
  
    &lt;!-- Load our configuration --&gt;  
    &lt;property file="./build.properties" /&gt;
    &lt;taskdef name="svnlog" classname="phing.tasks.ext.svn.SvnLogTask" /&gt;
    
    &lt;property name="package"  value="${phing.project.name}" override="true" /&gt;
    &lt;property name="builddir" value="${tmp}/build/${phing.project.name}" override="true" /&gt;
    &lt;property name="srcdir"   value="${project.basedir}" override="true" /&gt;


    &lt;target name="svn" description="SVN executes"&gt;
         &lt;!-- Export HEAD copy do /tmp/ --&gt;       
       &lt;svnexport
       svnpath="${svnpath}"
       repositoryurl="${rep}"
       force="yes"
       todir="${tmp}\export\${phing.project.name}"/&gt;
        &lt;!-- Získání čísla HEAD --&gt;
        &lt;svnlastrevision
           svnpath="${svnpath}"
           workingcopy="${wc}"
           propertyname="svn.lastrevision"/&gt;       
        &lt;!-- Vygenerování aktuálního logu --&gt;           
        &lt;svnlog
           svnpath="${svnpath}"
           repositoryurl="${rep}"
           name="CHANGELOG"
           xml="false"
           verbose="true"
           todir="${tmp}\export\${phing.project.name}"/&gt;    
    &lt;/target&gt;

    &lt;target name="phpdoc" description="API Documentation" depends="svn"&gt;
        &lt;!-- Generování phpdoc dokumentace --&gt;
        &lt;phpdoc title="Akce2008 API Documentation"
          destdir="${builddir}/apidocs"
          sourcecode="yes"
          defaultpackagename="Akce2008"
          output="HTML:default:default"&gt;
           &lt;fileset dir="${tmp}/export/${phing.project.name}"&gt;
              &lt;include name="*/*.php" /&gt;      
              &lt;exclude name="inc/phpmailer/**" /&gt;
              &lt;exclude name="build/**" /&gt;
           &lt;/fileset&gt;
            &lt;projdocfileset dir="."&gt;
                  &lt;include name="CHANGELOG" /&gt;
             &lt;/projdocfileset&gt;           
        &lt;/phpdoc&gt;
      &lt;/target&gt;

        &lt;!-- Fileset for all files --&gt;
        &lt;fileset dir="${tmp}/export/${phing.project.name}" id="allfiles"&gt;
            &lt;include name="**" /&gt;
            &lt;exclude name="build.xml" /&gt;
            &lt;exclude name="build.properties" /&gt;
        &lt;/fileset&gt;

    &lt;!-- Main Target --&gt;
    &lt;target name="main" description="main target" depends="phpdoc"&gt;
        &lt;!-- Zdrojové kódy pro příslušnou revizi --&gt;
        &lt;zip destfile="${builddir}/${phing.project.name}-R${svn.lastrevision}-${DSTAMP}${TSTAMP}.zip" basedir="${tmp}/export/${phing.project.name}" /&gt;                    
        &lt;!-- Vygenerovanou dokumentaci přesunu do ZIP s číslem příslušné revize --&gt;
        &lt;zip destfile="${builddir}/${phing.project.name}-apidocs-R${svn.lastrevision}-${DSTAMP}${TSTAMP}.zip" basedir="${builddir}/apidocs" /&gt;        
        &lt;!-- Smazaní temp adresáře --&gt;
        &lt;delete dir="${builddir}/apidocs" includeemptydirs="true" verbose="true" failonerror="true" /&gt;

    &lt;/target&gt;
&lt;/project&gt;
</pre>


<p>Vlastní build se pustí pomocí <code>phing</code> z příkazové řádky tam kde máte <code>build.xml</code> uložený. Pokud se nedaří Phing nainstalovat a nakonfigurovat pro chod např. s PHPDoc, tak doporučuji postup ze stránek Phingu.</p>

<pre name='code' class="bash">
pear channel-discover pear.phing.info
pear install -a phing/phing
pear install channel://pear.php.net/VersionControl_SVN-0.3.1
</pre>


<p>Doufám, že někomu rady budou k užitku, Phing je skvělý produkt i když většina asi dá za přednost <a href="http://ant.apache.org/">Antu</a> pokud nedělají čistě PHP.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/06/subversion-15-vydn/">Subversion 1.5 vydán!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-23T00:00:00+02:00" pubdate data-updated="true">23. 06. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Hlavní novinky jsem představil už v <a href="http://blog.prskavec.net/?p=75">TortoiseSVN 1.5.0-beta1</a> a podrobně s tím seznámím postupně jak s tím budu také delší dobu pracovat. Originální <a href="http://subversion.tigris.org/svn_1.5_releasenotes.html">release notes</a> je k dispozici na stránkách projektu. </p>


<p>  <p>Pro windows je k dispozici kromě zdojových kódů v této podobě, officiální binárky zatím k dispozici nejsou:</p>  <ul>   <li><a href="http://www.visualsvn.com/server/download/">VisualSVN Server 1.5</a> </li>    <li><a href="http://tortoisesvn.net/downloads">TortoiseSVN 1.5</a> </li>    <li><a href="http://www.collab.net/community/integrations/articles/download-merge-client.html">New Merge Clients for Eclipse</a> </li> </ul>  <p><a href="http://ankhsvn.open.collab.net/wiki/Roadmap">AnkhSVN 2.0</a> pro Visual Studio se chystá v co nekratší době, stejně jako <a href="http://www.collab.net/downloads/subversion/">officální binárky</a> pro Windows, které mají bý hotovy v tomto týdnu, certifikace je plánovaná na 24.6.2008. Pro Red Hat jsou již dnes k <a href="http://www.collab.net/downloads/subversion/redhat.html">dispozici</a>. Pro Solaris se v zápětí 26.6. 2008.</p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/06/assembla-svn-a-trac-pro-kazdho/">Assembla: SVN a Trac pro každého</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-23T00:00:00+02:00" pubdate data-updated="true">23. 06. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Pokud hledáte free hosting pro svůj projekt a není to opensource na které se hodí <a href="http://sourceforge.net/">Sourceforge</a> nebo <a href="http://code.google.com/">Google Code</a>, tak je několik alternativ např. <a href="https://opensvn.csie.org/">OpenSVN</a> a <a href="http://www.assembla.com/">Assembla</a>. Já jsem si vybral Assembla, ve free variantě vám umožní hostovat projekty do 500MB což mě zatím stačí a pro ty na kterých aktuálně dělám také bude stačit. Tak není nic jednodušího než si založit projekt a potom vyexportovat repozitory u sebe ze SVN.</p>

<pre>svnadmin dump path_to_rep &gt;file.dump</pre>


<p>Pokud máte toho víc, možná užijete tento <code>export.bat</code>, aby to bylo jednodušší pro celé repository, také se to hodí na zálohování.</p>

<pre>dir path_to_rep\rep_dir /b /O /AD &gt;dir1.txt

FOR /F  %%M IN (dir1.txt) DO (
  ECHO  %%M
  svnadmin dump path_to_rep/rep_dir/%%M  --incremental &gt;%%M.dmp
  zip -m -9 -g %%M.dmp.zip %%M.dmp
)</pre>


<p>Jednotlivé dump soubory potom naimportujete do Assembla. Hlavní výhodou je to, že je k dispozici celý systém třeba jen pro vás a nejste nikde k nalezení pokud zrovna nechcete. Samozřejmě těžko můžu dát ruku do ohně za spolehlivost a důvěryhodnost firmy, která to provozuje, ale jejich filozifie se mi líbí. Samozřejmě bych uvítal třeba firmu, která by to poskytovala u nás, ale myslím si že to už dnes není potřeba. Na <a title="http://www.assembla.com/tour" href="http://www.assembla.com/tour"><a href="http://www.assembla.com/tour">http://www.assembla.com/tour</a></a> najdete porovnání Free varianty s těmi komerčními. Commercial mi přijde při ceně kolem $150 (cca 2400 Kč) za rok celkem dobrá, myslím že provoz a údržba vlastního stroje na podobný účel musí přijít i malého soukromníka na mnohem větší peníze.</p>

<h4>Aktualizace 17.12.2008</h4>


<p>Už firma svoji politiku změnila a nemůžete si svůj projekt mít jako privátní zdarma, je to škoda, použitelné to ale zůstává pro otevřené projekty</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/06/opensuse-11-a-jak-to-nakonec-dopadlo/">OpenSuSE 11 a jak to nakonec dopadlo</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-19T00:00:00+02:00" pubdate data-updated="true">19. 06. 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Dnes vyšlo čerstvé <a href="http://software.opensuse.org/">OpenSUSE 11</a> a já jsem myslel, že by to mohlo být to pravé pro můj Sony VIAO VGN-TZ31XN. Ale bohužel jsem opět zkrachoval na tom, že moje rozlišení 1366x768 nějak nebrali v úvahu. Ať jsem to nastavil nebo ne. Detekce to nepozná a ruční nastavení nefungovalo. Nemyslím, že pokud nefunguje taková triviální věc jako nastavení rozlišení tak by to obyčejný člověk používal.  Tak jsem se vrátil k <a href="http://www.ubuntu.cz">Ubuntu 8.04</a>, kde není sebemenší problém a všechno funguje jak má.</p>

<h3>Problémy s Lighting 0.8 na Ubuntu</h3>


<p>Jen jsem narazil vždy na problém s instalací Lightingu 0.8 do Thunderbirda. Úplně mi to rozhodilo Thunderbird a nezobrazoval se kalendář kde měl. Tak mě napadlo si pořádně přečíst release notes a co se dočtu:</p>

<p><em>Many modern Linux distributions only package libstdc++6, which is incompatible with Lightning. Therefore please install the package &#8220;libstdc++5&#8221; or &#8220;compat-libstdc++&#8221; on your system before installing Lightning) </em></p>


<p> Ano, Ubuntu je také taková moderní distribuce. Tak jsem vypnul dolněk a potom jsem příslušnou knihovnu nainstaloval.</p>

<pre class="brush: plain">sudo apt-get install libstdc++5</pre>


<p>Když jsem doplněk pustil, je všechno ok. Třeba to někomu pomůže, já jsem na to přišel čistě náhodou.  Kdyby někdo věděl jak na Sony VAIO rozchodit to OpenSUSE budu rád za radu.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page//page/12/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/page//page/10/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <ul id="recent_posts">
      <li class="post">
      <a href="http://blog.prskavec.net" alt="Home"><img class="icons" src="/images/Home.png" ></a>
      <a href="http://blog.prskavec.net/archives/" alt="Archives"><img  class="icons" src="/images/Calendar.png"></a>
      <a href="mailto:ladislav@prskavec.net" alt="E-Mail"><img  class="icons" src="/images/Envelope.png"></a>
      <a href="http://blog.prskavec.net/atom.xml" alt="subscribe feed"><img class="icons" src="/images/rss_big.png"></a>
      </li>
  </ul>
</section>
<section>
  <h1>Ladislav Prskavec</h1>
  <p style="margin-top:6px;"><img src="/images/avatar.jpg" style="float:left; margin-right:10px;" width="100" height="115" /><a href="http://github.com/abtris/">Programátor</a>, otec, <a href="http://www.dzogchen.cz">buddhista</a>, milovník dobrého jídla, knih, nových technologí a hraček pro všechny s&nbsp;duší dítěte.
</p>
  <br style="clear:left;"/>
</section>
<section>
  <h1>Poslední příspěvky</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2016/10/prednaska-o-sre-na-devops-meetupu/">Přednáška o SRE na DevOPS meetupu</a>
      </li>
    
      <li class="post">
        <a href="/2016/07/srecon-16-europe/">SREcon&#8217;16 Europe</a>
      </li>
    
      <li class="post">
        <a href="/2016/06/serverless-jako-neco-vic-nez-docker/">Serverless jako něco víc než Docker</a>
      </li>
    
      <li class="post">
        <a href="/2016/03/co-to-je-sre/">Co to je SRE?</a>
      </li>
    
      <li class="post">
        <a href="/2016/02/suchy-docker/">Suchý docker</a>
      </li>
    
      <li class="post">
        <a href="/2015/12/nastroje-co-pouzivam-pro-vyvoj-a-spravu/">Nástroje co používám pro vývoj a správu</a>
      </li>
    
      <li class="post">
        <a href="/2015/09/porovnani-implementace-microservice-v-nodejs-and-go-lang/">Porovnání implementace service v NodeJS a Go lang</a>
      </li>
    
      <li class="post">
        <a href="/2015/05/amazon-elastic-beanstalk-a-docker/">Amazon Elastic Beanstalk a docker</a>
      </li>
    
      <li class="post">
        <a href="/2015/02/docker-cluster-management/">Docker cluster management</a>
      </li>
    
      <li class="post">
        <a href="/2014/12/zapier-a-zasilani-zustatku-z-banky-zdarma-na-mobil/">Zapier a zasílání zůstatku z banky zdarma na mobil</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Subversion</h1>
  <p style="margin-top:6px; text-align:center"><a href="http://itunes.apple.com/cz/book/subversion/id498008712?mt=11" onClick="_gaq.push(['_trackEvent', 'link', 'itunes/subversion', 'svn-promo-sidebar-vpravo']);"><img src="http://a2.mzstatic.com/us/r30/Publication/v4/5c/1a/66/5c1a667d-2f78-b9b2-31ec-7c06ab9b74e8/B_SUBVERSION.225x225-75.jpg" style="float:left; margin-right:10px; width:172px; height:225px;" /></a>
</p>
  <br style="clear:left;"/>
</section>

<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/+LadislavPrskavec?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<section>
  <h1>GitHub</h1>

<iframe src="http://githubbadge.appspot.com/badge/abtris" style="border: 0;height: 142px;width: 200px;overflow: hidden;" frameBorder=0></iframe>

</section>
<section>
  <h1>Twitter</h1>
  <a class="twitter-timeline" width="250" height="500" href="https://twitter.com/abtris" data-widget-id="345276838232326144">Tweets by @abtris</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Ladislav Prskavec -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-79221-21']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script>
var _0x5d8e=["readyState","complete","name","get","getAll","gtm","indexOf",".send","event","send","social","body","getElementsByTagName","undefined","copy","Advanced tracking","Copy to clipboard","substring","trim","textContent","target","addEventListener","onscroll","document","documentElement","scrollHeight","offsetHeight","clientHeight","max","innerHeight","scrollTop","pageYOffset","Scroll","20%","40%","60%","80%","100%","pathname","location","[\\?&#]","=([^&#]*)","exec","edge.create","Facebook","Like","subscribe","Event","edge.remove","Unlike","message.send","Share","nodeName","IFRAME","src","url","Twitter","tweet","bind","events","ready","Time spent","15s","setTimeout","30s","45s","60s","75s","90s","105s","120s","length","","replace","round","img","Text length","Image count"];(function(){try{if(document[_0x5d8e[0]]===_0x5d8e[1]){mainAdvancedTracking()}else {var interval=setInterval(function(){if(document[_0x5d8e[0]]===_0x5d8e[1]){clearInterval(interval);mainAdvancedTracking()}},250)};function mainAdvancedTracking(){

        var copyToClipboard = true;
        var scrollTracking = true;
        var textLength = true;
        var imageCount = true;
        var socialTracking = true;
        var timeSpent = true;

var trackerName=ga[_0x5d8e[4]]()[0][_0x5d8e[3]](_0x5d8e[2]);var isGTMhere=false;if(trackerName[_0x5d8e[6]](_0x5d8e[5])> -1){isGTMhere=true};function sentEventToGA(eCat,eAct,eLab){if(isGTMhere){ga(trackerName+_0x5d8e[7],_0x5d8e[8],{eventCategory:eCat,eventAction:eAct,eventLabel:eLab,nonInteraction:1})}else {ga(_0x5d8e[9],_0x5d8e[8],eCat,eAct,eLab,{"nonInteraction":1})}}function sentSocialToGA(eCat,eAct,eLab){if(isGTMhere){ga(trackerName+_0x5d8e[7],_0x5d8e[10],{eventCategory:eCat,eventAction:eAct,eventLabel:eLab})}else {ga(_0x5d8e[9],{hitType:_0x5d8e[10],socialNetwork:eCat,socialAction:eAct,socialTarget:eLab})}}try{if(copyToClipboard){var hbody=document[_0x5d8e[12]](_0x5d8e[11])[0];if( typeof (hbody)!==_0x5d8e[13]){hbody[_0x5d8e[21]](_0x5d8e[14],function(evt){sentEventToGA(_0x5d8e[15],_0x5d8e[16],evt[_0x5d8e[20]][_0x5d8e[19]][_0x5d8e[18]]()[_0x5d8e[17]](0,100))})}}}catch(err){};try{if(scrollTracking){var flag20=true;var flag40=true;var flag60=true;var flag80=true;var flag100=true;window[_0x5d8e[22]]=function(e){var body=window[_0x5d8e[23]][_0x5d8e[11]],html=window[_0x5d8e[23]][_0x5d8e[24]];var delkaStranky=Math[_0x5d8e[28]](body[_0x5d8e[25]],body[_0x5d8e[26]],html[_0x5d8e[27]],html[_0x5d8e[25]],html[_0x5d8e[26]]);var velikostOkna=window[_0x5d8e[29]]||document[_0x5d8e[24]][_0x5d8e[27]]||document[_0x5d8e[11]][_0x5d8e[27]];var pozice=(window[_0x5d8e[23]][_0x5d8e[30]]||window[_0x5d8e[31]])+velikostOkna;if(pozice>0){var procenta=(pozice/delkaStranky)*100};if((flag20)&&(procenta>20)){sentEventToGA(_0x5d8e[15],_0x5d8e[32],_0x5d8e[33]);flag20=false};if((flag40)&&(procenta>40)){sentEventToGA(_0x5d8e[15],_0x5d8e[32],_0x5d8e[34]);flag40=false};if((flag60)&&(procenta>60)){sentEventToGA(_0x5d8e[15],_0x5d8e[32],_0x5d8e[35]);flag60=false};if((flag80)&&(procenta>80)){sentEventToGA(_0x5d8e[15],_0x5d8e[32],_0x5d8e[36]);flag80=false};if((flag100)&&(procenta>99)){sentEventToGA(_0x5d8e[15],_0x5d8e[32],_0x5d8e[37]);flag100=false}}}}catch(err){};try{if(socialTracking){var mpath=document[_0x5d8e[39]][_0x5d8e[38]];function extractParamFromUri(uri,paramName){if(!uri){return};var regex= new RegExp(_0x5d8e[40]+paramName+_0x5d8e[41]);var params=regex[_0x5d8e[42]](uri);if(params!=null){return unescape(params[1])};return}FB[_0x5d8e[47]][_0x5d8e[46]](_0x5d8e[43],function(targetUrl){sentSocialToGA(_0x5d8e[44],_0x5d8e[45],mpath)});FB[_0x5d8e[47]][_0x5d8e[46]](_0x5d8e[48],function(targetUrl){sentSocialToGA(_0x5d8e[44],_0x5d8e[49],mpath)});FB[_0x5d8e[47]][_0x5d8e[46]](_0x5d8e[50],function(targetUrl){sentSocialToGA(_0x5d8e[44],_0x5d8e[51],mpath)});function trackTwitter(intent_event){if(intent_event){var opt_pagePath;if(intent_event[_0x5d8e[20]]&&intent_event[_0x5d8e[20]][_0x5d8e[52]]==_0x5d8e[53]){opt_target=extractParamFromUri(intent_event[_0x5d8e[20]][_0x5d8e[54]],_0x5d8e[55])};sentEventToGA(_0x5d8e[56],_0x5d8e[51],mpath)}}twttr[_0x5d8e[60]](function(twttr){twttr[_0x5d8e[59]][_0x5d8e[58]](_0x5d8e[57],trackTwitter)})}}catch(err){};try{if(timeSpent){window[_0x5d8e[63]](function(){sentEventToGA(_0x5d8e[15],_0x5d8e[61],_0x5d8e[62])},15000);window[_0x5d8e[63]](function(){sentEventToGA(_0x5d8e[15],_0x5d8e[61],_0x5d8e[64])},30000);window[_0x5d8e[63]](function(){sentEventToGA(_0x5d8e[15],_0x5d8e[61],_0x5d8e[65])},45000);window[_0x5d8e[63]](function(){sentEventToGA(_0x5d8e[15],_0x5d8e[61],_0x5d8e[66])},60000);window[_0x5d8e[63]](function(){sentEventToGA(_0x5d8e[15],_0x5d8e[61],_0x5d8e[67])},75000);window[_0x5d8e[63]](function(){sentEventToGA(_0x5d8e[15],_0x5d8e[61],_0x5d8e[68])},90000);window[_0x5d8e[63]](function(){sentEventToGA(_0x5d8e[15],_0x5d8e[61],_0x5d8e[69])},105000);window[_0x5d8e[63]](function(){sentEventToGA(_0x5d8e[15],_0x5d8e[61],_0x5d8e[70])},120000)}}catch(err){};try{var tLen=document[_0x5d8e[12]](_0x5d8e[11])[0][_0x5d8e[19]][_0x5d8e[18]]()[_0x5d8e[73]](/ /g,_0x5d8e[72])[_0x5d8e[73]](/(?:\r\n|\r|\n)/g,_0x5d8e[72])[_0x5d8e[71]];tLen=Math[_0x5d8e[74]](tLen/100)*100;var imgLen=document[_0x5d8e[12]](_0x5d8e[75])[_0x5d8e[71]];if(textLength){sentEventToGA(_0x5d8e[15],_0x5d8e[76],tLen)};if(imageCount){sentEventToGA(_0x5d8e[15],_0x5d8e[77],imgLen)}}catch(err){}}}catch(err){}})()
</script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter21617953 = new Ya.Metrika({id:21617953,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/21617953" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->



<script type="text/javascript">
      var disqus_shortname = 'prskavecblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/javascripts/all.js?v=1412111651"></script>



</body>
</html>
